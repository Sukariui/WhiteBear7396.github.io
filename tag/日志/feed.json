{
    "version": "https://jsonfeed.org/version/1",
    "title": "想养一只大金毛 • All posts by \"日志\" tag",
    "description": "你我皆为星辰之子，每一个细胞都书写着整个宇宙的历史，当你凝视自己，也望见了宇宙的轮廓。",
    "home_page_url": "http://whitebear7396.top",
    "items": [
        {
            "id": "http://whitebear7396.top/2020/10/27/%E8%BF%90%E8%A1%8C%E6%97%A5%E5%BF%97/",
            "url": "http://whitebear7396.top/2020/10/27/%E8%BF%90%E8%A1%8C%E6%97%A5%E5%BF%97/",
            "title": "运行日志",
            "date_published": "2020-10-27T05:34:46.000Z",
            "content_html": "<h1 id=\"运行日志\"><a href=\"#运行日志\" class=\"headerlink\" title=\"运行日志\"></a>运行日志</h1><p>:::warning<br>2020/10/26<br>遇到问题：代码块高亮，不知道如何解决。<br>:::</p>\n<figure class=\"highlight python\"><figcaption><span>天气函数代码</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/python3</span></span><br><span class=\"line\"><span class=\"comment\">#coding=utf-8</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> requests, json</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"comment\"># -- 配置 --</span></span><br><span class=\"line\"><span class=\"comment\"># ------------------------------</span></span><br><span class=\"line\"><span class=\"comment\">#酷推服务官网 https://cp.xuthus.cc/</span></span><br><span class=\"line\">SKEY = <span class=\"string\">&#x27;**************************&#x27;</span>           <span class=\"comment\">#酷推的key</span></span><br><span class=\"line\"><span class=\"comment\">#自己改发送方式,不需要的话注销一个用#号</span></span><br><span class=\"line\">url_1 = <span class=\"string\">&#x27;https://push.xuthus.cc/send/&#x27;</span>+SKEY         <span class=\"comment\">#这个是酷推的QQ推送服务            </span></span><br><span class=\"line\"><span class=\"comment\">#url_2 = &#x27;https://push.xuthus.cc/wx/&#x27;+SKEY+&#x27;?c=&#x27;    #这个是酷推的微信推送服务，默认关闭。（更改完了记得修改55、56行推送方式）</span></span><br><span class=\"line\"><span class=\"comment\">#城市设置</span></span><br><span class=\"line\"><span class=\"comment\">#查询你的城市代码，将ID填入下方 https://where.heweather.com/index.html</span></span><br><span class=\"line\">city_ID = <span class=\"string\">&#x27;********&#x27;</span>                            </span><br><span class=\"line\"><span class=\"comment\"># ------------------------------</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_iciba_everyday</span>():</span></span><br><span class=\"line\">    icbapi = <span class=\"string\">&#x27;http://open.iciba.com/dsapi/&#x27;</span></span><br><span class=\"line\">    eed = requests.get(icbapi)</span><br><span class=\"line\">    bee = eed.json()               <span class=\"comment\">#返回的数据</span></span><br><span class=\"line\">    english = eed.json()[<span class=\"string\">&#x27;content&#x27;</span>]</span><br><span class=\"line\">    zh_CN = eed.json()[<span class=\"string\">&#x27;note&#x27;</span>]</span><br><span class=\"line\">    str = <span class=\"string\">&#x27;\\n【奇怪的知识】\\n&#x27;</span> + english + <span class=\"string\">&#x27;\\n&#x27;</span> + zh_CN</span><br><span class=\"line\">    <span class=\"keyword\">return</span> str</span><br><span class=\"line\">print(get_iciba_everyday())</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span>(<span class=\"params\">*args</span>):</span></span><br><span class=\"line\">    api =<span class=\"string\">&#x27;http://t.weather.itboy.net/api/weather/city/&#x27;</span></span><br><span class=\"line\">    tqurl = api + city_ID</span><br><span class=\"line\">    response = requests.get(tqurl)</span><br><span class=\"line\">    d = response.json()         <span class=\"comment\">#将数据以json形式返回，这个d就是返回的json数据</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(d[<span class=\"string\">&#x27;status&#x27;</span>] == <span class=\"number\">200</span>):     <span class=\"comment\">#当返回状态码为200，输出天气状况</span></span><br><span class=\"line\">        print(<span class=\"string\">&quot;城市：&quot;</span>,d[<span class=\"string\">&quot;cityInfo&quot;</span>][<span class=\"string\">&quot;parent&quot;</span>], d[<span class=\"string\">&quot;cityInfo&quot;</span>][<span class=\"string\">&quot;city&quot;</span>])</span><br><span class=\"line\">        print(<span class=\"string\">&quot;更新时间：&quot;</span>,d[<span class=\"string\">&quot;time&quot;</span>])</span><br><span class=\"line\">        print(<span class=\"string\">&quot;日期：&quot;</span>,d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;forecast&quot;</span>][<span class=\"number\">0</span>][<span class=\"string\">&quot;ymd&quot;</span>])</span><br><span class=\"line\">        print(<span class=\"string\">&quot;星期：&quot;</span>,d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;forecast&quot;</span>][<span class=\"number\">0</span>][<span class=\"string\">&quot;week&quot;</span>])</span><br><span class=\"line\">        print(<span class=\"string\">&quot;天气：&quot;</span>,d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;forecast&quot;</span>][<span class=\"number\">0</span>][<span class=\"string\">&quot;type&quot;</span>])</span><br><span class=\"line\">        print(<span class=\"string\">&quot;温度：&quot;</span>,d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;forecast&quot;</span>][<span class=\"number\">0</span>][<span class=\"string\">&quot;high&quot;</span>],d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;forecast&quot;</span>][<span class=\"number\">0</span>][<span class=\"string\">&quot;low&quot;</span>])</span><br><span class=\"line\">        print(<span class=\"string\">&quot;湿度：&quot;</span>,d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;shidu&quot;</span>])</span><br><span class=\"line\">        print(<span class=\"string\">&quot;PM25:&quot;</span>,d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;pm25&quot;</span>])</span><br><span class=\"line\">        print(<span class=\"string\">&quot;PM10:&quot;</span>,d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;pm10&quot;</span>])</span><br><span class=\"line\">        print(<span class=\"string\">&quot;空气质量：&quot;</span>,d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;quality&quot;</span>])</span><br><span class=\"line\">        print(<span class=\"string\">&quot;风力风向：&quot;</span>,d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;forecast&quot;</span>][<span class=\"number\">0</span>][<span class=\"string\">&quot;fx&quot;</span>],d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;forecast&quot;</span>][<span class=\"number\">0</span>][<span class=\"string\">&quot;fl&quot;</span>])</span><br><span class=\"line\">        print(<span class=\"string\">&quot;感冒指数：&quot;</span>,d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;ganmao&quot;</span>])</span><br><span class=\"line\">        print(<span class=\"string\">&quot;温馨提示：&quot;</span>,d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;forecast&quot;</span>][<span class=\"number\">0</span>][<span class=\"string\">&quot;notice&quot;</span>],<span class=\"string\">&quot;。&quot;</span>)</span><br><span class=\"line\">        tdwt = <span class=\"string\">&#x27;【今日份天气】\\n城市：&#x27;</span>+d[<span class=\"string\">&#x27;cityInfo&#x27;</span>][<span class=\"string\">&#x27;parent&#x27;</span>]+<span class=\"string\">&#x27; &#x27;</span>+d[<span class=\"string\">&#x27;cityInfo&#x27;</span>][<span class=\"string\">&#x27;city&#x27;</span>]+<span class=\"string\">&#x27;\\n日期：&#x27;</span>+d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;forecast&quot;</span>][<span class=\"number\">0</span>][<span class=\"string\">&quot;ymd&quot;</span>]+<span class=\"string\">&#x27; &#x27;</span>+d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;forecast&quot;</span>][<span class=\"number\">0</span>][<span class=\"string\">&quot;week&quot;</span>]+<span class=\"string\">&#x27;\\n天气：&#x27;</span>+d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;forecast&quot;</span>][<span class=\"number\">0</span>][<span class=\"string\">&quot;type&quot;</span>]+<span class=\"string\">&#x27;\\n温度：&#x27;</span>+d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;forecast&quot;</span>][<span class=\"number\">0</span>][<span class=\"string\">&quot;high&quot;</span>]+<span class=\"string\">&#x27; &#x27;</span>+d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;forecast&quot;</span>][<span class=\"number\">0</span>][<span class=\"string\">&quot;low&quot;</span>]+<span class=\"string\">&#x27;\\n湿度：&#x27;</span>+d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;shidu&quot;</span>]+<span class=\"string\">&#x27;\\n空气质量：&#x27;</span>+d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;quality&quot;</span>]+<span class=\"string\">&#x27;\\n风力风向：&#x27;</span>+d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;forecast&quot;</span>][<span class=\"number\">0</span>][<span class=\"string\">&quot;fx&quot;</span>]+<span class=\"string\">&#x27; &#x27;</span>+d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;forecast&quot;</span>][<span class=\"number\">0</span>][<span class=\"string\">&quot;fl&quot;</span>]+<span class=\"string\">&#x27;\\n温馨提示：&#x27;</span>+d[<span class=\"string\">&quot;data&quot;</span>][<span class=\"string\">&quot;forecast&quot;</span>][<span class=\"number\">0</span>][<span class=\"string\">&quot;notice&quot;</span>]+<span class=\"string\">&#x27;。\\n[更新时间：&#x27;</span>+d[<span class=\"string\">&quot;time&quot;</span>]+<span class=\"string\">&#x27;]\\n--------------------------------------------&#x27;</span>+get_iciba_everyday()         </span><br><span class=\"line\">        <span class=\"comment\">#天气提示内容，基本上该有的都做好了，如果要添加信息可以看上面的print，我感觉有用的我都弄进来了。</span></span><br><span class=\"line\">        requests.post(url_1,tdwt.encode(<span class=\"string\">&#x27;utf-8&#x27;</span>))     <span class=\"comment\">#这个是酷推QQ</span></span><br><span class=\"line\">        <span class=\"comment\">#requests.post(url_2,tdwt.encode(&#x27;utf-8&#x27;))    #这个是酷推微信</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        error = <span class=\"string\">&#x27;【出现错误】\\n　　今日天气推送错误，请检查服务状态！&#x27;</span></span><br><span class=\"line\">        requests.post(url_1,error.encode(<span class=\"string\">&#x27;utf-8&#x27;</span>))<span class=\"comment\">#如果报错，会发生这样的事情。</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main_handler</span>(<span class=\"params\">event, context</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> main()</span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    main()</span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://raw.githubusercontent.com/WhiteBear7396/WhiteBear7396.github.io/master/postimg/%E3%80%90%E4%BA%91%E5%87%BD%E6%95%B0%E7%B3%BB%E5%88%97%E3%80%91%E6%AF%8F%E6%97%A5%E6%8E%A8%E9%80%81%E5%A4%A9%E6%B0%94%E4%BF%A1%E6%81%AF/%E3%80%90%E4%BA%91%E5%87%BD%E6%95%B0%E7%B3%BB%E5%88%97%E3%80%91%E6%AF%8F%E6%97%A5%E6%8E%A8%E9%80%81%E5%A4%A9%E6%B0%94%E4%BF%A1%E6%81%AF1.jpg\" alt=\"111\"></p>\n",
            "tags": [
                "日志"
            ]
        }
    ]
}